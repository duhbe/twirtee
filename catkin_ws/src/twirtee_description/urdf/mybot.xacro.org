<?xml version="1.0"?>
<robot name="mybot" xmlns:xacro="http://www.ros.org/wiki/xacro">
  <!-- First ROS-Gazebo robot -->

  <xacro:property name="PI" value="3.1415926535897931"/>
  <xacro:property name="chassisHeight" value="0.5"/>
  <xacro:property name="chassisRadius" value="0.15"/>
  <xacro:property name="chassisMass" value="50"/>

  <xacro:property name="casterRadius" value="0.05"/>
  <xacro:property name="casterMass" value="5"/>

  <xacro:property name="wheelWidth" value="0.05"/>
  <xacro:property name="wheelRadius" value="0.1"/>
  <xacro:property name="wheelPos" value="0.2"/>
  <xacro:property name="wheelMass" value="5"/>


  <xacro:property name="servoHeight" value="0.1"/>
  <xacro:property name="servoLength" value="0.4"/>
  <xacro:property name="servoWidth" value="0.2"/>
  <xacro:property name="servoMass" value="0.25"/>


  <xacro:property name="cameraSize" value="0.05"/>
  <xacro:property name="cameraMass" value="0.1"/>


  <xacro:include filename="$(find mybot_description)/urdf/mybot.gazebo" />
  <xacro:include filename="$(find mybot_description)/urdf/materials.xacro" />
  <xacro:include filename="$(find mybot_description)/urdf/macros.xacro" />

  <link name="footprint" />

  <joint name="base_joint" type="fixed">
    <parent link="footprint"/>
    <child link="chassis"/>
  </joint>

  <link name="chassis">
    <collision>
      <origin xyz="0 0 ${wheelRadius}" rpy="0 0 0" />
      <geometry>
	<cylinder radius="${chassisRadius}" length="${chassisHeight}"/>
      </geometry>
    </collision>
    <visual>
      <origin xyz="0 0 ${wheelRadius}" rpy="0 0 0"/>
      <geometry>
	<cylinder radius="${chassisRadius}" length="${chassisHeight}"/>
      </geometry>
      <material name="orange"/>
    </visual>
    <inertial>
      <origin xyz="0 0 ${wheelRadius}" rpy="0 0 0"/>
      <mass value="${chassisMass}"/>
      <cylinder_inertia m="${chassisMass}" r="${chassisRadius}" h="${chassisHeight}"/>
    </inertial>
  </link>

<joint name="fixed" type="fixed">
  <parent link="chassis"/>
  <child link="caster_wheel"/>
</joint>

<link name="caster_wheel">
  <collision>
    <origin xyz="${casterRadius-chassisRadius} 0 ${casterRadius-chassisHeight+wheelRadius}" rpy="0 0 0"/>
    <geometry>
      <sphere radius="${casterRadius}"/>
    </geometry>
  </collision>
  
  <visual>
    <origin xyz="${casterRadius-chassisRadius} 0 ${casterRadius-chassisHeight+wheelRadius}" rpy="0 0 0"/>
    <geometry>
      <sphere radius="${casterRadius}"/>
    </geometry>
    <material name="red"/>
  </visual>

  <inertial>
    <origin xyz="${casterRadius-chassisRadius} 0 ${casterRadius-chassisHeight+wheelRadius}" rpy="0 0 0"/>
    <mass value="${casterMass}"/>
    <sphere_inertia m="${casterMass}" r="${casterRadius}"/>
  </inertial>
</link>

<wheel lr="left" tY="1"/>
<wheel lr="right" tY="-1"/>




<!-- ************************* -->
<!--            ARM            -->
<!-- ************************* -->
<!--
  <link name="link0">
  <visual>
    <origin rpy="0 0 0" xyz="-0.10 0.0 0.18"/>
    <geometry>
      <box size="0.40 0.20 0.36" />
    </geometry>
    <material name="green"/>
  </visual>
  <visual>
    <origin rpy="0 0 0" xyz="0.0 0.0 0.36"/>
    <geometry>
      <cylinder radius="0.01" length="0.08"/>
    </geometry>
    <material name="green"/>
  </visual>
  <inertial>
    <mass value="10"/>
    <inertia ixx="0.4" ixy="0.0" ixz="0.0" iyy="0.4" iyz="0.0" izz="0.2"/>
  </inertial>
</link>

<link name="link1">
<visual>
  <origin rpy="0.0 0.0 0.0" xyz="0.0 0.0 0.10"/>
  <geometry>
    <box size="0.36 0.40 0.20" />
  </geometry>
</visual>
<visual>
  <origin rpy="0.0 -1.57 0.0" xyz="-0.22 0.10 0.10"/>
  <geometry>
    <cylinder radius="0.01" length="0.08"/>
  </geometry>
  <material name="blue"/>
</visual>
<inertial>
  <mass value="10"/>
  <inertia ixx="0.4" ixy="0.0" ixz="0.0" iyy="0.4" iyz="0.0" izz="0.2"/>
</inertial>
</link>

<link name="link2">
<visual>
  <origin rpy="0.0 0.0 0.0" xyz="0.0 -0.35 0.0"/>
  <geometry>
    <box size="0.01 0.90 0.10" />
  </geometry>
  <material name="red"/>
</visual>
<visual>
  <origin rpy="0.0 0.0 0.0" xyz="0.46 -0.35 0.0"/>
  <geometry>
    <box size="0.01 0.90 0.10" />
  </geometry>
  <material name="red"/>
</visual>
<inertial>
  <mass value="10"/>
  <inertia ixx="0.4" ixy="0.0" ixz="0.0" iyy="0.4" iyz="0.0" izz="0.2"/>
</inertial>
</link>

<link name="link3">
  <visual>
    <origin rpy="0.0 0.0 0.0" xyz="0.26 -0.10 0.0"/>
    <geometry>
      <box size="0.36 0.40 0.20" />
    </geometry>
  </visual>
  <visual>
    <origin rpy="0.0 -1.57 0.0" xyz="0.04 0.0 0.0"/>
    <geometry>
      <cylinder radius="0.01" length="0.08"/>
    </geometry>
    <material name="blue"/>
  </visual>
  <visual>
    <origin rpy="0.0 0.0 0.0" xyz="0.075 -0.55 0.0"/>
    <geometry>
      <box size="0.01 0.90 0.10" />
    </geometry>
    <material name="blue"/>
  </visual>
  <visual>
    <origin rpy="0.0 0.0 0.0" xyz="0.445 -0.55 0.0"/>
    <geometry>
      <box size="0.01 0.90 0.10" />
    </geometry>
    <material name="blue"/>
  </visual>
<inertial>
  <mass value="10"/>
  <inertia ixx="0.4" ixy="0.0" ixz="0.0" iyy="0.4" iyz="0.0" izz="0.2"/>
</inertial>
</link>

<link name="link4">
  <visual>
    <origin rpy="0.0 0.0 0.0" xyz="0.26 -0.10 0.0"/>
    <geometry>
      <box size="0.36 0.40 0.20" />
    </geometry>
  </visual>
  <visual>
    <origin rpy="0.0 -1.57 0.0" xyz="0.04 0.0 0.0"/>
    <geometry>
      <cylinder radius="0.01" length="0.08"/>
    </geometry>
    <material name="blue"/>
  </visual>
<inertial>
  <mass value="10"/>
  <inertia ixx="0.4" ixy="0.0" ixz="0.0" iyy="0.4" iyz="0.0" izz="0.2"/>
</inertial>
</link>




<joint name="chassis_arm" type="fixed">
<parent link="chassis"/>
<child link="link0"/>
<origin xyz="0.0 0.0 0.0" rpy="0 0 0" />
</joint>

<joint name="1st_joint" type="revolute">
<parent link="link0"/>
<child link="link1"/>
<origin xyz="0.00 0.0 0.40" rpy="0 0 0" />
<axis xyz="0.0 0.0 1.0" />
<limit effort="30" velocity="1.0" lower="-0.785" upper="0.785" />
</joint>

<joint name="2nd_joint" type="revolute">
<parent link="link1"/>
<child link="link2"/>
<origin xyz="-0.26 0.1 0.10" rpy="0 0 0" />
<axis xyz="1.0 0.0 0.0" />
<limit effort="30" velocity="1.0" lower="-3.1416" upper="0.0" />
</joint>

<joint name="3rd_joint" type="revolute">
<parent link="link2"/>
<child link="link3"/>
<origin xyz="0.0 -0.7 0.0" rpy="0 0 0" />
<axis xyz="1.0 0.0 0.0" />
<limit effort="30" velocity="1.0" lower="-1.570" upper="1.570" />
</joint>

<joint name="4th_joint" type="revolute">
<parent link="link3"/>
<child link="link4"/>
<origin xyz="0.0 -0.9 0.0" rpy="0 0 0" />
<axis xyz="1.0 0.0 0.0" />
<limit effort="30" velocity="1.0" lower="-1.570" upper="0.0" />
</joint>

-->
<!-- ************************* -->
<!--          CAMERA           -->
<!-- ************************* -->
<joint name="camfixed" type="fixed">
  <origin xyz="0 0 ${chassisHeight+casterRadius+cameraSize/2}" rpy="0 0 0"/>
  <parent link="chassis"/>
  <child link="camera"/>
</joint>

<link name="camera">
  <collision>
    <origin xyz="0 0 0" rpy="0 0 0"/>
    <geometry>
      <box size="${cameraSize} ${cameraSize} ${cameraSize}"/>
    </geometry>
  </collision>

  <visual>
    <origin xyz="0 0 0" rpy="0 0 0"/>
    <geometry>
      <box size="${cameraSize} ${cameraSize} ${cameraSize}"/>
    </geometry>
    <material name="blue"/>
  </visual>

  <inertial>
    <mass value="${cameraMass}" />
    <origin xyz="0 0 0" rpy="0 0 0"/>
    <box_inertia m="${cameraMass}" x="${cameraSize}" y="${cameraSize}" z="${cameraSize}" />
  </inertial>
</link>


</robot>
